(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86d17aea"],{"37e2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{background:"rgb(245, 245, 245)","padding-bottom":"20px"}},[a("div",{staticClass:"container forget-c alpay-container"},[a("div",{staticClass:"pay-title"},[e._v("银联快捷支付")]),a("div",{staticClass:"forget-container",staticStyle:{"margin-top":"0",background:"#fff"}},[a("div",{staticClass:"steps-container"},[a("div",{staticClass:"steps-link"},[a("div",{ref:"progress",staticClass:"progress"})]),a("dl",{class:{current:0==e.steps,active:e.steps>0}},[a("dt",[e._v("1")]),a("dd",[e._v("填写信息")])]),a("dl",{class:{current:1==e.steps,active:e.steps>1}},[a("dt",[e._v("2")]),a("dd",[e._v("确认支付")])])]),0==e.steps?a("div",{staticClass:"form-wrapper"},[a("el-form",{attrs:{"label-width":"412px"}},[a("el-form-item",{attrs:{label:"银行卡注册人名称："}},[a("el-input",{attrs:{placeholder:"银行卡注册人名称"},model:{value:e.payerName,callback:function(t){e.payerName=t},expression:"payerName"}})],1),a("el-form-item",{attrs:{label:"身份证号："}},[a("el-input",{attrs:{placeholder:"身份证号"},model:{value:e.idCardNo,callback:function(t){e.idCardNo=t},expression:"idCardNo"}})],1),a("el-form-item",{attrs:{label:"银行卡号："}},[a("el-input",{attrs:{placeholder:"银行卡号"},model:{value:e.cardNo,callback:function(t){e.cardNo=t},expression:"cardNo"}})],1),a("el-form-item",{attrs:{label:"手机号："}},[a("el-input",{attrs:{placeholder:"手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{staticClass:"next-step-btn",attrs:{type:"primary"},on:{click:e.unionFenZhangOrder}},[e._v("下一步")])],1)],1)],1):e._e(),1==e.steps?a("div",{staticClass:"form-wrapper"},[a("el-form",{attrs:{"label-width":"412px"}},[a("el-form-item",{staticStyle:{"margin-bottom":"45px"},attrs:{label:"支付短信验证码："}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"短信验证码"},model:{value:e.validateCode,callback:function(t){e.validateCode=t},expression:"validateCode"}},[a("i",{attrs:{slot:"suffix"},slot:"suffix"},[a("a",{staticClass:"send-msg",attrs:{href:"javascript:;"},on:{click:e.sendMobile}},[e._v(e._s(e.msg))])])])],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{staticClass:"next-step-btn",attrs:{type:"primary"},on:{click:e.confirmPay}},[e._v("确认支付")])],1)],1)],1):e._e()])])])},s=[],n=(a("96cf"),a("3b8d")),i=a("5f87"),o={data:function(){return{steps:0,username:"",mobile:"18033441849",code:"",msgCode:"",password:"",rePassword:"",userId:"",orderId:"",payerName:"",idCardNo:"",cardNo:"",phone:"",terminalType:"OTHER",terminalId:"",ocSettlementId:"",count:60,msg:"发送验证码",validateCode:"",vSend:!0,amountPayable:""}},watch:{steps:function(e){this.$refs.progress.style.width=100*e+"%"}},mounted:function(){this.$refs.progress.style.width=100*this.steps+"%";var e=this.$route.params,t=e.orderId,a=e.amountPayable;this.orderId=t,this.amountPayable=a},methods:{confirmPay:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/api/confirmPay",{ocSettlementId:this.ocSettlementId,validateCode:this.validateCode});case 2:t=e.sent,"200"===t.code?this.$router.push("/order/success/b2bUnion/"+this.amountPayable):this.$message.warning(t.message);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),sendMobile:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.vSend){e.next=2;break}return e.abrupt("return");case 2:return this.vSend=!1,e.next=5,this.$post("/api/paySendValidateCode",{ocSettlementId:this.ocSettlementId});case 5:t=e.sent,"200"===t.code?(this.$message.success("短信已发送!"),this.countDown()):this.$message.warning(t.message),this.vSend=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),countDown:function(){var e=this;this.isDisabled=!0,this.msg=this.count+"秒后重新发送";var t=setInterval((function(){e.count--,e.count<=0?(clearInterval(t),e.vSend=!0,e.msg="获取验证码",e.isDisabled=!1):e.msg=e.count+"秒后重新发送"}),1e3)},unionFenZhangOrder:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(i["a"])(),t=JSON.parse(t),t){e.next=5;break}return this.$router.push("/login"),e.abrupt("return");case 5:if(this.payerName){e.next=8;break}return this.$message.warning("银行卡注册人名称不能为空"),e.abrupt("return");case 8:if(this.idCardNo){e.next=11;break}return this.$message.warning("身份证号不能为空"),e.abrupt("return");case 11:if(this.cardNo){e.next=14;break}return this.$message.warning("银行卡号不能为空"),e.abrupt("return");case 14:if(this.phone){e.next=17;break}return this.$message.warning("手机号不能为空"),e.abrupt("return");case 17:if(/^((\+|00)86)?1[3-9]\d{9}$/.test(this.phone)){e.next=20;break}return this.$message.warning("手机号格式不正确"),e.abrupt("return");case 20:return a=Object(i["b"])(),e.next=23,this.$post("/api/unionFenZhangOrder",{token:a,orderId:this.orderId,payerName:this.payerName,idCardNo:this.idCardNo,cardNo:this.cardNo,phone:this.phone,terminalType:this.terminalType,terminalId:this.terminalId});case 23:r=e.sent,"200"===r.code?(this.ocSettlementId=r.ocSettlementId,this.steps=1):this.$message.error(r.message);case 25:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},c=o,l=(a("54d9"),a("2877")),d=Object(l["a"])(c,r,s,!1,null,null,null);t["default"]=d.exports},"54d9":function(e,t,a){"use strict";var r=a("83e1"),s=a.n(r);s.a},"83e1":function(e,t,a){}}]);
//# sourceMappingURL=chunk-86d17aea.0fe17486.js.map