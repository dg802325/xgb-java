(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25b9d872"],{"0307":function(t,e,s){},"0f52":function(t,e,s){"use strict";var r=s("e4b9"),a=s.n(r);a.a},"43e6":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{background:"rgb(245, 245, 245)"}},[s("div",{staticClass:"container c-order-container"},[s("div",{staticClass:"title"},[t._v("填写订单信息")]),s("div",{staticClass:"c-border c-order-wrapper"},[s("div",{staticClass:"c-title"},[t._v("收货地址")]),s("div",{staticClass:"c-border c-address-wrapper"},[t.currentAddress.receiveProvince?s("div",{staticClass:"current-address"},[s("div",{staticClass:"l"},[s("p",[s("span",{staticClass:"label"},[t._v("收 货 人 :")]),s("span",{staticClass:"value"},[t._v(t._s(t.currentAddress.receiveName))])]),s("p",[s("span",{staticClass:"label"},[t._v("联系方式 :")]),s("span",{staticClass:"value"},[t._v(t._s(t._f("formatMobile")(t.currentAddress.receivePhone)))])]),s("p",[s("span",{staticClass:"label"},[t._v("收货地址 :")]),s("span",{staticClass:"value"},[t._v(t._s(t._f("setDetailAdd")(t.currentAddress)))])])]),s("div",{staticClass:"r"},[s("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.editVisible=!0}}},[t._v("修改地址")])])]):t._e(),s("div",{staticClass:"handle-address",class:{"no-address":0==t.addresses.length}},[t.addresses.length?s("a",{staticClass:"change",attrs:{href:"javascript:;"},on:{click:function(e){t.switchVisible=!0}}},[s("i",{staticClass:"fa fa-map-marker"}),t._v("切换地址\n          ")]):t._e(),s("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.plusVisible=!0}}},[s("i",{staticClass:"fa fa-plus-circle"}),t._v("添加地址\n          ")])])]),s("div",{staticClass:"c-title"},[t._v("支付方式")]),s("div",{staticClass:"c-border pay-type"},[s("a",{class:{active:0===t.orderType},attrs:{href:"javascript:;"},on:{click:function(e){t.orderType=0}}},[t._v("在线支付")])]),s("div",{staticClass:"c-title"},[t._v("商品信息")]),s("div",[s("table",{staticClass:"v-sku-info-table"},[t._m(0),s("tbody",t._l(t.skus,(function(e){return s("tr",{key:e.id},[s("td",{attrs:{align:"left"}},[s("div",{staticClass:"t-sku-info"},[s("div",{staticClass:"t-cover"},[s("img",{attrs:{src:e.imgUrl}})]),s("div",{staticClass:"info"},[s("p",{staticClass:"name"},[s("router-link",{attrs:{to:"/detail/"+e.skuId}},[t._v(t._s(e.skuName))])],1)])])]),s("td",[t._v("¥"+t._s(e.skuPrice))]),s("td",[t._v("x"+t._s(e.skuNum))]),s("td",[t._v("¥"+t._s(e.skuPrice*e.skuNum))]),s("td",[t._v("¥"+t._s(e.skuPrice*e.skuNum))])])})),0)])]),s("div",[s("div",{staticClass:"c-title summary-title"},[t._v("金额明细")]),s("div",{staticClass:"order-summary"},[s("p",[s("span",{staticClass:"label"},[t._v("商品件数：")]),s("span",{staticClass:"value"},[t._v(t._s(t.skuSum)+"件")])]),t.freight?s("p",[s("span",{staticClass:"label"},[t._v("运费：")]),s("span",{staticClass:"value"},[t._v("¥"+t._s(t.freight))])]):t._e(),s("p",[s("span",{staticClass:"label"},[t._v("商品总价：")]),s("span",{staticClass:"value"},[t._v("¥"+t._s(t.amountPayable))])]),s("p",{staticStyle:{"padding-top":"10px"}},[s("span",{staticClass:"label"},[t._v("应付总额：")]),s("span",{staticClass:"value"},[s("b",[t._v("¥"+t._s(t.totalPrice))])])])])])]),s("div",{staticClass:"submit-wrapper c-border"},[s("a",{attrs:{href:"javascript:;"},on:{click:t.handleSubmit}},[t._v("提交订单")])])]),t.switchVisible?s("vSwitch",{attrs:{item:t.currentAddress},on:{close:t.switchChange}}):t._e(),t.plusVisible?s("vPlus",{on:{close:t.plusChange}}):t._e(),t.editVisible?s("vEdit",{attrs:{item:t.currentAddress},on:{close:t.editChange}}):t._e()],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("td",{attrs:{width:"413"}},[t._v("商品信息")]),s("td",{attrs:{width:"100"}},[t._v("单价")]),s("td",{attrs:{width:"130"}},[t._v("数量")]),s("td",{attrs:{width:"110"}},[t._v("小计")]),s("td",[t._v("实付")])])])}],i=(s("8e6e"),s("456d"),s("c5f6"),s("ac6a"),s("96cf"),s("3b8d")),n=s("bd86"),c=s("bb89"),u=s("4fdb"),l=s("84a3"),d=s("5f87"),o=s("2f62");function p(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function v(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?p(s,!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):p(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var h={data:function(){return{switchVisible:!1,plusVisible:!1,editVisible:!1,orderType:0,addresses:[],currentAddress:{},sku:{},skuSum:"",skuId:"",skuSumSparce:0,amountPayable:0,skus:[],carts:[],freight:0,totalPrice:0}},computed:v({},Object(o["c"])(["regionMap"])),created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$route.query.carts,e){t.next=3;break}return t.abrupt("return");case 3:if(this.carts=e,s=Object(d["b"])(),s){t.next=8;break}return this.$router.push("/login"),t.abrupt("return");case 8:return t.next=10,this.shoppingCartOrder(e,s);case 10:return t.next=12,this.getAddresses(s);case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),filters:{formatCity:function(t,e){return e[t]?e[t].divisionName:t},formatMobile:function(t){return t?t.substring(0,3)+"****"+t.substring(t.length-4):""},setDetailAdd:function(t){return t?t.divisionNameProvince+t.divisionNameCity+t.divisionNameArea+t.detailAdd:""}},methods:{shoppingCartOrder:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,s){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$post("/api/shoppingCartOrder",{carts:e,token:s});case 2:r=t.sent,"200"===r.code?(a=0,r.skus.forEach((function(t){a+=Number(t.skuNum)})),this.skuSum=a,this.skus=r.skus,this.freight=r.Freight,this.totalPrice=r.totalPrice,this.currentAddress=r.address||{},this.skuSumSparce=r.skuSumSparce,this.amountPayable=r.amountPayable):this.$message.warning(r.message),console.log(r);case 5:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}(),handleSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,r,a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Object(d["b"])(),e){t.next=4;break}return this.$router.push("/login"),t.abrupt("return");case 4:if(this.currentAddress){t.next=7;break}return this.$message.warning("收货地址不能为空！"),t.abrupt("return");case 7:return s={token:e,carts:this.carts,addressId:this.currentAddress.id,orderType:this.orderType,origin:0},t.next=10,this.$post("/api/shoppingCartSettlement",s);case 10:r=t.sent,"200"===r.code?(console.log(r),a=r.orderId,i=r.amountPayable,n=r.orderCancelTime,this.$router.push("/order/pay/".concat(a,"/").concat(i,"/").concat(n))):this.$message.warning(r.message);case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),switchChange:function(t){t&&(this.currentAddress=t),this.switchVisible=!1},plusChange:function(){this.plusVisible=!1,this.getAddresses()},editChange:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}return t.next=3,this.getAddresses();case 3:if(this.addresses.length)for(s=0;s<this.addresses.length;s++)r=this.addresses[s],this.currentAddress.id===r.id&&(this.currentAddress=r);case 4:this.editVisible=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getAddresses:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Object(d["b"])(),t.next=3,this.$get("/api/getAddresses",{token:e});case 3:s=t.sent,"200"===s.code&&(this.addresses=s.addresses.reverse(),Object.keys(this.currentAddress).length||s.addresses.length&&(this.currentAddress=s.addresses[0]));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},components:{vSwitch:c["a"],vPlus:u["a"],vEdit:l["a"]}},f=h,b=(s("f97b"),s("2877")),g=Object(b["a"])(f,r,a,!1,null,null,null);e["default"]=g.exports},bb89:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"switch-address-dialog"},[s("div",{staticClass:"switch-address--wrapper"},[s("span",{staticClass:"close",on:{click:t.handleClick}}),s("div",{staticClass:"dialog-title"},[t._v("\n       选择收货地址\n     ")]),s("div",{staticClass:"dialog-body"},[s("div",{staticClass:"scroll"},t._l(t.addresses,(function(e){return s("div",{key:e.id,staticClass:"item ",class:{active:t.selected.id===e.id},on:{click:function(s){return t.changeEvent(e)}}},[e.isDefault?s("div",{staticClass:"default-address"},[t._v("\n           默认地址\n         ")]):t._e(),s("p",[s("span",{staticClass:"label"},[t._v("收 货 人 :")]),s("span",{staticClass:"value"},[t._v(" "+t._s(e.receiveName))])]),s("p",[s("span",{staticClass:"label"},[t._v("联系方式 :")]),s("span",{staticClass:"value"},[t._v(" "+t._s(e.receivePhone))])]),s("p",[s("span",{staticClass:"label"},[t._v("收货地址 :")]),s("span",{staticClass:"value"},[t._v(" "+t._s(t._f("formatCity")(e.receiveProvince,t.regionMap))+t._s(t._f("formatCity")(e.receiveCity,t.regionMap))+t._s(t._f("formatCity")(e.receiveArea,t.regionMap))+t._s(e.detailAdd))])])])})),0)]),s("div",{staticClass:"footer"},[s("a",{staticClass:"btn default",attrs:{href:"javacript:;"},on:{click:t.handleClick}},[t._v("取消")]),s("a",{staticClass:"btn danger",attrs:{href:"javacript:;"},on:{click:t.handleOkClick}},[t._v("确定")])])])])},a=[],i=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("bd86"),c=s("5f87"),u=s("2f62");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(s,!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var o={data:function(){return{addresses:[],selected:{}}},props:{item:Object},computed:d({},Object(u["c"])(["regionMap"])),created:function(){this.getAddresses(),this.selected=JSON.parse(JSON.stringify(this.item))},filters:{formatCity:function(t,e){return e[t]?e[t].divisionName:t}},methods:{changeEvent:function(t){this.selected=t},handleOkClick:function(){this.$emit("close",this.selected)},getAddresses:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Object(c["b"])(),t.next=3,this.$get("/api/getAddresses",{token:e});case 3:s=t.sent,"200"===s.code&&(this.addresses=s.addresses.reverse());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleClick:function(){this.$emit("close")}}},p=o,v=(s("0f52"),s("2877")),h=Object(v["a"])(p,r,a,!1,null,null,null);e["a"]=h.exports},e4b9:function(t,e,s){},f97b:function(t,e,s){"use strict";var r=s("0307"),a=s.n(r);a.a}}]);
//# sourceMappingURL=chunk-25b9d872.4e5c2cd4.js.map