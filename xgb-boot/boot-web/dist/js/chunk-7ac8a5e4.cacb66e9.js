(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ac8a5e4"],{"0f52":function(e,t,s){"use strict";var r=s("e4b9"),a=s.n(r);a.a},"761c":function(e,t,s){},b883:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{background:"rgb(245, 245, 245)"}},[s("div",{staticClass:"container c-order-container"},[s("div",{staticClass:"title"},[e._v("填写订单信息")]),s("div",{staticClass:"c-border c-order-wrapper"},[s("div",{staticClass:"c-title"},[e._v("收货地址")]),s("div",{staticClass:"c-border c-address-wrapper"},[e.currentAddress.receiveProvince?s("div",{staticClass:"current-address"},[s("div",{staticClass:"l"},[s("p",[s("span",{staticClass:"label"},[e._v("收 货 人 :")]),s("span",{staticClass:"value"},[e._v(e._s(e.currentAddress.receiveName))])]),s("p",[s("span",{staticClass:"label"},[e._v("联系方式 :")]),s("span",{staticClass:"value"},[e._v(e._s(e._f("formatMobile")(e.currentAddress.receivePhone)))])]),s("p",[s("span",{staticClass:"label"},[e._v("收货地址 :")]),s("span",{staticClass:"value"},[e._v(e._s(e._f("setDetailAdd")(e.currentAddress)))])])]),s("div",{staticClass:"r"},[s("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.editVisible=!0}}},[e._v("修改地址")])])]):e._e(),s("div",{staticClass:"handle-address",class:{"no-address":0==e.addresses.length}},[e.addresses.length?s("a",{staticClass:"change",attrs:{href:"javascript:;"},on:{click:function(t){e.switchVisible=!0}}},[s("i",{staticClass:"fa fa-map-marker"}),e._v("切换地址\n          ")]):e._e(),s("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.plusVisible=!0}}},[s("i",{staticClass:"fa fa-plus-circle"}),e._v("添加地址\n          ")])])]),s("div",{staticClass:"c-title"},[e._v("支付方式")]),s("div",{staticClass:"c-border pay-type"},[s("a",{class:{active:0===e.orderType},attrs:{href:"javascript:;"},on:{click:function(t){e.orderType=0}}},[e._v("在线支付")])]),s("div",{staticClass:"c-title"},[e._v("商品信息")]),s("div",[s("table",{staticClass:"v-sku-info-table"},[e._m(0),s("tbody",[s("tr",[s("td",{attrs:{align:"left"}},[s("div",{staticClass:"t-sku-info"},[s("div",{staticClass:"t-cover"},[s("img",{attrs:{src:e.sku.imgUrl}})]),s("div",{staticClass:"info"},[s("p",{staticClass:"name"},[s("router-link",{attrs:{to:"/detail/"+e.sku.id}},[e._v(e._s(e.sku.skuName))])],1)])])]),s("td",[e._v("¥"+e._s(e.sku.skuPrice))]),s("td",[e._v("x"+e._s(e.skuSum))]),s("td",[e._v("¥"+e._s(e.sku.skuPrice*e.skuSum))]),s("td",[e._v("¥"+e._s(e.sku.skuPrice*e.skuSum))])])])])]),s("div",[s("div",{staticClass:"c-title summary-title"},[e._v("金额明细")]),s("div",{staticClass:"order-summary"},[s("p",[s("span",{staticClass:"label"},[e._v("商品件数：")]),s("span",{staticClass:"value"},[e._v(e._s(e.skuSum)+"件")])]),s("p",[s("span",{staticClass:"label"},[e._v("运费：")]),s("span",{staticClass:"value"},[e._v("¥"+e._s(e.sku.skuExpressPrice?e.sku.skuExpressPrice:0))])]),s("p",[s("span",{staticClass:"label"},[e._v("商品总价：")]),s("span",{staticClass:"value"},[e._v("¥"+e._s(e.skuSumSparce))])]),s("p",{staticStyle:{"padding-top":"10px"}},[s("span",{staticClass:"label"},[e._v("应付总额：")]),s("span",{staticClass:"value"},[s("b",[e._v("¥"+e._s(e.amountPayable))])])])])])]),s("div",{staticClass:"submit-wrapper c-border"},[s("a",{attrs:{href:"javascript:;"},on:{click:e.handleSubmit}},[e._v("提交订单")])])]),e.switchVisible?s("vSwitch",{attrs:{item:e.currentAddress},on:{close:e.switchChange}}):e._e(),e.plusVisible?s("vPlus",{on:{close:e.plusChange}}):e._e(),e.editVisible?s("vEdit",{attrs:{item:e.currentAddress},on:{close:e.editChange}}):e._e()],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("td",{attrs:{width:"413"}},[e._v("商品信息")]),s("td",{attrs:{width:"100"}},[e._v("单价")]),s("td",{attrs:{width:"130"}},[e._v("数量")]),s("td",{attrs:{width:"110"}},[e._v("小计")]),s("td",[e._v("实付")])])])}],i=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("bd86"),c=s("bb89"),u=s("4fdb"),d=s("84a3"),l=s("5f87"),o=s("2f62");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(s,!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={data:function(){return{switchVisible:!1,plusVisible:!1,editVisible:!1,orderType:0,addresses:[],currentAddress:{},sku:{},skuSum:"",skuId:"",skuSumSparce:0,amountPayable:0}},computed:v({},Object(o["c"])(["regionMap"])),created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(l["b"])(),s=this.$route.params,r=s.skuId,a=s.skuSum,r){e.next=4;break}return e.abrupt("return");case 4:if(t){e.next=7;break}return this.$router.push("/login"),e.abrupt("return");case 7:return this.skuId=r,this.skuSum=a,e.next=11,this.getSku({skuId:r,skuSum:a,token:t});case 11:return e.next=13,this.getAddresses(t);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),filters:{formatCity:function(e,t){return t[e]?t[e].divisionName:e},formatMobile:function(e){return e?e.substring(0,3)+"****"+e.substring(e.length-4):""},setDetailAdd:function(e){return e?e.divisionNameProvince+e.divisionNameCity+e.divisionNameArea+e.detailAdd:""}},methods:{getSku:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$get("/api/getSku",t);case 2:s=e.sent,"200"===s.code?(this.currentAddress=s.address||{},this.sku=s.sku,this.skuSumSparce=s.skuSumSparce,this.amountPayable=s.amountPayable):this.$message.warning(s.message);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,r,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(l["b"])(),t){e.next=4;break}return this.$router.push("/login"),e.abrupt("return");case 4:if(this.currentAddress){e.next=7;break}return this.$message.warning("收货地址不能为空！"),e.abrupt("return");case 7:return s={token:t,skuId:this.sku.id,addressId:this.currentAddress.id,orderType:this.orderType,origin:0,skuSum:this.skuSum},e.next=10,this.$post("/api/settlement",s);case 10:r=e.sent,"200"===r.code?(a=r.orderId,i=r.amountPayable,n=r.orderCancelTime,this.$router.push("/order/pay/".concat(a,"/").concat(i,"/").concat(n))):this.$message.warning(r.message);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),switchChange:function(e){e&&(this.currentAddress=e),this.switchVisible=!1},plusChange:function(){this.plusVisible=!1,this.getAddresses()},editChange:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,this.getAddresses();case 3:if(this.addresses.length)for(s=0;s<this.addresses.length;s++)r=this.addresses[s],this.currentAddress.id===r.id&&(this.currentAddress=r);case 4:this.editVisible=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getAddresses:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(l["b"])(),e.next=3,this.$get("/api/getAddresses",{token:t});case 3:s=e.sent,"200"===s.code&&(this.addresses=s.addresses.reverse(),Object.keys(this.currentAddress).length||s.addresses.length&&(this.currentAddress=s.addresses[0]));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},components:{vSwitch:c["a"],vPlus:u["a"],vEdit:d["a"]}},f=h,b=(s("cefa"),s("2877")),m=Object(b["a"])(f,r,a,!1,null,null,null);t["default"]=m.exports},bb89:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"switch-address-dialog"},[s("div",{staticClass:"switch-address--wrapper"},[s("span",{staticClass:"close",on:{click:e.handleClick}}),s("div",{staticClass:"dialog-title"},[e._v("\n       选择收货地址\n     ")]),s("div",{staticClass:"dialog-body"},[s("div",{staticClass:"scroll"},e._l(e.addresses,(function(t){return s("div",{key:t.id,staticClass:"item ",class:{active:e.selected.id===t.id},on:{click:function(s){return e.changeEvent(t)}}},[t.isDefault?s("div",{staticClass:"default-address"},[e._v("\n           默认地址\n         ")]):e._e(),s("p",[s("span",{staticClass:"label"},[e._v("收 货 人 :")]),s("span",{staticClass:"value"},[e._v(" "+e._s(t.receiveName))])]),s("p",[s("span",{staticClass:"label"},[e._v("联系方式 :")]),s("span",{staticClass:"value"},[e._v(" "+e._s(t.receivePhone))])]),s("p",[s("span",{staticClass:"label"},[e._v("收货地址 :")]),s("span",{staticClass:"value"},[e._v(" "+e._s(e._f("formatCity")(t.receiveProvince,e.regionMap))+e._s(e._f("formatCity")(t.receiveCity,e.regionMap))+e._s(e._f("formatCity")(t.receiveArea,e.regionMap))+e._s(t.detailAdd))])])])})),0)]),s("div",{staticClass:"footer"},[s("a",{staticClass:"btn default",attrs:{href:"javacript:;"},on:{click:e.handleClick}},[e._v("取消")]),s("a",{staticClass:"btn danger",attrs:{href:"javacript:;"},on:{click:e.handleOkClick}},[e._v("确定")])])])])},a=[],i=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("bd86"),c=s("5f87"),u=s("2f62");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var o={data:function(){return{addresses:[],selected:{}}},props:{item:Object},computed:l({},Object(u["c"])(["regionMap"])),created:function(){this.getAddresses(),this.selected=JSON.parse(JSON.stringify(this.item))},filters:{formatCity:function(e,t){return t[e]?t[e].divisionName:e}},methods:{changeEvent:function(e){this.selected=e},handleOkClick:function(){this.$emit("close",this.selected)},getAddresses:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(c["b"])(),e.next=3,this.$get("/api/getAddresses",{token:t});case 3:s=e.sent,"200"===s.code&&(this.addresses=s.addresses.reverse());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClick:function(){this.$emit("close")}}},p=o,v=(s("0f52"),s("2877")),h=Object(v["a"])(p,r,a,!1,null,null,null);t["a"]=h.exports},cefa:function(e,t,s){"use strict";var r=s("761c"),a=s.n(r);a.a},e4b9:function(e,t,s){}}]);
//# sourceMappingURL=chunk-7ac8a5e4.cacb66e9.js.map